let academyFarmPortal =
{
    verticalCells: 50,
    headerText: 1.8,
    labelText: 0.9,
    inputText: 1,
    headers: [
        {
            text: 'ZEUS',
            top: 1, left: 1,
            height: 2, width: 5
        },
        {
            text: 'LOOP MODS',
            top: 1, left: 23,
            height: 2, width: 14
        },
        {
            text: 'FARMS',
            top: 1, left: 56,
            height: 2, width: 6
        },
        {
            text: 'PERSONNEL',
            top: 15, left: 1,
            height: 2, width: 10
        },
        {
            text: 'RESEARCH',
            top: 15, left: 26,
            height: 2, width: 9
        },
        {
            text: 'BADGES',
            top: 28, left: 26,
            height: 2, width: 7
        },
        {
            text: 'STOCK',
            top: 35, left: 1,
            height: 2, width: 6
        }
    ],
    labels: [
        {
            text: 'rank',
            left: 2, top: 4,
            height: 2, width: 4
        },
        {
            text: 'crew',
            left: 12, top: 4,
            height: 2, width: 4
        },
        {
            text: 'next',
            left: 2, top: 7,
            height: 2, width: 4
        },
        {
            text: '/',
            left: 12, top: 7,
            height: 2, width: 2
        },
        {
            text: 'z 3',
            left: 2, top: 10,
            height: 2, width: 3
        },
        {
            text: 'z 6',
            left: 10, top: 10,
            height: 2, width: 3
        },
        {
            text: 'rank benefits',
            left: 24, top: 4,
            height: 2, width: 10
        },
        {
            text: 'beyonders',
            left: 39, top: 4,
            height: 2, width: 8
        },
        {
            text: 'material hauling',
            left: 24, top: 7,
            height: 2, width: 12
        },
        {
            text: 'swarm',
            left: 42, top: 7,
            height: 2, width: 5
        },
        {
            text: 'expansion',
            left: 24, top: 10,
            height: 2, width: 8
        },
        {
            text: 'power',
            left: 11, top: 18,
            height: 2, width: 5
        },
        {
            text: 'owned',
            left: 17, top: 18,
            height: 2, width: 6
        },
        {
            text: 'mining pods',
            left: 2, top: 21,
            height: 2, width: 8
        },
        {
            text: 'fireteams',
            left: 3, top: 24,
            height: 2, width: 7
        },
        {
            text: 'titans',
            left: 5, top: 27,
            height: 2, width: 5
        },
        {
            text: 'corvettes',
            left: 3, top: 30,
            height: 2, width: 7
        },
        {
            text: 'mission analysis 1',
            left: 27, top: 18,
            height: 2, width: 12
        },
        {
            text: 'mission analysis 2',
            left: 27, top: 21,
            height: 2, width: 12
        },
        {
            text: 'mission analysis 3',
            left: 27, top: 24,
            height: 2, width: 12
        },
        {
            text: 'engineering',
            left: 27, top: 31,
            height: 2, width: 9
        },
        {
            text: 'difar',
            left: 5, top: 38,
            height: 2, width: 4
        },
        {
            text: 'kento',
            left: 4, top: 41,
            height: 2, width: 5
        },
        {
            text: 'chromium',
            left: 2, top: 44,
            height: 2, width: 7
        },
        {
            text: 'exon',
            left: 24, top: 38,
            height: 2, width: 4
        },
        {
            text: 'organium',
            left: 21, top: 41,
            height: 2, width: 7
        },
        {
            text: 'adamorphium',
            left: 18, top: 44,
            height: 2, width: 10
        },
        {
            text: 'moskom',
            left: 37, top: 38,
            height: 2, width: 6
        },
        {
            text: 'darkseid',
            left: 37, top: 41,
            height: 2, width: 6
        },
        {
            text: 'farm',
            left: 57, top: 4,
            height: 2, width: 4
        },
        {
            text: 'total',
            left: 62, top: 4,
            height: 2, width: 5
        },
        {
            text: 'pod',
            left: 68, top: 4,
            height: 2, width: 4
        },
        {
            text: 'fire',
            left: 73, top: 4,
            height: 2, width: 4
        },
        {
            text: 'titan',
            left: 78, top: 4,
            height: 2, width: 4
        },
        {
            text: 'corv',
            left: 83, top: 4,
            height: 2, width: 4
        },
        {
            text: 'run time',
            left: 88, top: 4,
            height: 2, width: 6
        },
        {
            text: '1-1',
            left: 57, top: 7,
            height: 2, width: 4
        },
        {
            text: '1-2',
            left: 57, top: 10,
            height: 2, width: 4
        },
        {
            text: '1-3',
            left: 57, top: 13,
            height: 2, width: 4
        },
        {
            text: '2-1',
            left: 57, top: 16,
            height: 2, width: 4
        },
        {
            text: '2-2',
            left: 57, top: 19,
            height: 2, width: 4
        },
        {
            text: '2-3',
            left: 57, top: 22,
            height: 2, width: 4
        },
        {
            text: '3-1',
            left: 57, top: 25,
            height: 2, width: 4
        },
        {
            text: '3-2',
            left: 57, top: 28,
            height: 2, width: 4
        },
        {
            text: '3-3',
            left: 57, top: 31,
            height: 2, width: 4
        }
    ],
    inputs: [
        {
            id: 'zeus-rank-current',
            type: 'number',
            left: 7, top: 3.25,
            width: 4, height: 2
        },
        {
            id: 'zeus-crew',
            type: 'number',
            left: 17, top: 3.25,
            width: 4, height: 2
        },
        {
            id: 'zeus-rank-next',
            type: 'number',
            left: 7, top: 6.25,
            width: 6, height: 2
        },
        {
            id: 'zeus-install-2',
            type: 'number',
            left: 6, top: 9.25,
            width: 3, height: 2
        },
        {
            id: 'zeus-install-5',
            type: 'number',
            left: 14, top: 9.25,
            width: 3, height: 2
        }
    ]
}

const academyPanel =
{
    width: 10,
    height: 10,
    panelCSS: null,
    active: ''
};

function ConstructPortal(height, width, portalObj)
{
    academyPanel.width = width;
    academyPanel.height = height;

    const panelElem = document.createElement('div');
    document.body.append(panelElem);
    panelElem.classList.add('panel');
    panelElem.style.width = `${academyPanel.width}px`;
    panelElem.style.height = `${academyPanel.height}px`;
    academyPanel.elem = panelElem;

    setPanelCSS(portalObj)

    let cellSize = height / portalObj.verticalCells;

    portalObj.headers.forEach(header => {
        let newElem = document.createElement('label');
        academyPanel.elem.appendChild(newElem);
        newElem.innerText = header.text;
        newElem.classList.add('header');
        newElem.style.left = `${cellSize * header.left}px`;
        newElem.style.top = `${cellSize * header.top}px`;
        newElem.style.width = `${cellSize * header.width}px`;
        newElem.style.height = `${cellSize * header.height}px`;
    });

    portalObj.labels.forEach(label => {
        let newElem = document.createElement('label');
        academyPanel.elem.appendChild(newElem);
        newElem.innerText = label.text;
        newElem.classList.add('label');
        newElem.style.left = `${cellSize * label.left}px`;
        newElem.style.top = `${cellSize * label.top}px`;
        newElem.style.width = `${cellSize * label.width}px`;
        newElem.style.height = `${cellSize * label.height}px`;
    });

    portalObj.inputs.forEach(input => {
        let newElem = document.createElement('input');
        academyPanel.elem.appendChild(newElem);
        newElem.type = input.type;
        newElem.classList.add(`input${input.type}`);
        newElem.style.left = `${cellSize * input.left}px`;
        newElem.style.top = `${cellSize * input.top}px`;
        newElem.style.width = `${cellSize * input.width}px`;
        newElem.style.height = `${cellSize * input.height}px`;
    });
}

function setPanelCSS(portalObj)
{
    if (academyPanel.panelCSS) document.body.removeChild(academyPanel.panelCSS);

    const newCSS = document.createElement('style');
    document.body.append(newCSS);
    const newStyleSheet = newCSS.sheet;

    let cellSize = academyPanel.height / portalObj.verticalCells;

    let selector = '.header';
    let properties =
    [
        'position: absolute;\n',
        `font-size: ${Math.round(cellSize * portalObj.headerText)}px;\n`,
        `line-height: ${Math.round(cellSize * portalObj.headerText)}px;\n`,
        'color: #CCCCCC;\n',
        `text-shadow: 0px 0px ${Math.round(cellSize * portalObj.headerText / 9)}px #FB7CC7;\n`,
        'margin: auto;\n',
        'text-align: start;\n'
    ].join('');

    newStyleSheet.insertRule(`${selector} { ${properties} }`);

    selector = '.label';
    properties =
    [
        'position: absolute;\n',
        `font-size: ${Math.round(cellSize * portalObj.labelText)}px;\n`,
        `line-height: ${Math.round(cellSize * portalObj.labelText)}px;\n`,
        'color: #CCCCCC;\n',
        `text-shadow: 0px 0px ${Math.round(cellSize * portalObj.labelText / 9)}px #FB7CC7;\n`,
        'margin: 0px;\n',
        'text-align: end;\n'
    ].join('');

    newStyleSheet.insertRule(`${selector} { ${properties} }`);

    selector = '.inputnumber';
    properties =
    [
        'position: absolute;\n',
        `font-size: ${Math.round(cellSize * portalObj.inputText)}px;\n`,
        'text-align: center;\n',
        'font-family: "Syncopate";\n',
        `box-shadow: 0px 0px ${Math.round(cellSize / 5)}px #CCCCCC, inset 0px 0px ${Math.round(cellSize / 10)}px #CCCCCC;\n`,
        'background-color: black;\n',
        `color: #CCCCCC;\n`,
        'padding: 0px\n'
    ].join('');

    newStyleSheet.insertRule(`${selector} { ${properties} }`);

    academyPanel.panelCSS = newCSS;
}